<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Astral Accessibility Widget - Full Feature Demo</title>
  <link rel="stylesheet" href="styles.css" />
  <!-- Load the widget bundle -->
  <script src="main.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      line-height: 1.6;
    }
    .card {
      background: rgba(255, 255, 255, 0.7);
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    h1, h2 {
      color: #333;
    }
    button {
      background: #007bff;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      margin: 10px 0;
    }
    button:hover {
      background: #0056b3;
    }
    a {
      color: #007bff;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    .demo-button {
      background: #28a745;
      font-size: 16px;
      padding: 15px 30px;
      margin: 20px 0;
    }    .demo-button:hover {
      background: #1e7e34;
    }
    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    .feature-card {
      background: #f8f9fa;
      border: 2px solid #e9ecef;
      border-radius: 8px;
      padding: 15px;
    }
    .feature-card h3 {
      color: #495057;
      margin-top: 0;
    }
    .test-area {
      background: #fff3cd;
      border: 1px solid #ffeaa7;
      border-radius: 4px;
      padding: 10px;
      margin: 10px 0;
    }
    .missing-alt {
      width: 100px;
      height: 50px;
      background: #ddd;
      display: inline-block;
    }
    form {
      margin: 15px 0;
    }
    .error-demo {
      border: 2px solid #dc3545;
      padding: 10px;
      margin: 10px 0;
    }
    .small-target {
      width: 20px;
      height: 20px;
      background: #007bff;
      color: white;
      border: none;
      font-size: 10px;
    }
  </style>
</head>
<body>  <h1>Astral Accessibility Widget - Full Feature Demo</h1>
  <p>This comprehensive demo showcases all accessibility features of the Astral Widget. Click the button below to initialize the widget, then use the accessibility icon in the bottom-right corner to test each feature.</p>
  
  <button class="demo-button" onclick="initializeWidget()">Initialize Accessibility Widget</button>
  
  <div class="card">
    <h2>üéØ Core Accessibility Features</h2>
    <p>The widget includes these established accessibility enhancements:</p>
    <ul>
      <li><strong>Screen Reader:</strong> Enhanced screen reader support and announcements</li>
      <li><strong>Contrast:</strong> Adjustable contrast levels for better visibility</li>
      <li><strong>Highlight Links:</strong> Makes links more visible and identifiable</li>
      <li><strong>Bigger Text:</strong> Increase text size for easier reading</li>
      <li><strong>Text Spacing:</strong> Adjust letter and word spacing</li>
      <li><strong>Line Height:</strong> Customize line spacing for improved readability</li>
    </ul>
  </div>

  <div class="card">
    <h2>üÜï New WCAG 2.1 Compliance Features</h2>
    <p>The widget now includes advanced accessibility validation and enhancement tools:</p>
    
    <div class="feature-grid">
      <div class="feature-card">
        <h3>üñºÔ∏è Alt Text Validator</h3>
        <p>Identifies images missing alternative text and provides suggestions.</p>
        <div class="test-area">
          <p>Test images:</p>
          <img src="banner.png" alt="Astral banner" width="100">
          <img src="bg.png" width="50" height="30"> <!-- Missing alt text -->
          <div class="missing-alt">Decorative div</div>
        </div>
      </div>
      
      <div class="feature-card">
        <h3>üìù Page Title Validator</h3>
        <p>Ensures pages have descriptive, meaningful titles.</p>
        <div class="test-area">
          <p>Current page title: "Astral Accessibility Widget - Full Feature Demo"</p>
        </div>
      </div>
      
      <div class="feature-card">
        <h3>üåê Language Validator</h3>
        <p>Checks for proper language attributes on HTML elements.</p>
        <div class="test-area">
          <p>Page language: <code>lang="en"</code></p>
          <p lang="es">Este texto est√° en espa√±ol</p>
          <p>This text has no language attribute</p>
        </div>
      </div>
      
      <div class="feature-card">
        <h3>üîÑ Auto-refresh Controls</h3>
        <p>Manages and controls automatic page refreshes for accessibility.</p>        <div class="test-area">
          <p>Monitors for: setTimeout, setInterval, meta refresh</p>
          <button onclick="setTimeout(() => alert('Detected!'), 1000)">Test Timer</button>
          <p id="timer-test">Auto-refresh timer: 0</p>
        </div>
      </div>
      
      <div class="feature-card">
        <h3>üéØ Focus Trap Management</h3>
        <p>Creates accessible focus containment for modals and dialogs.</p>
        <div class="test-area">
          <button onclick="showModal()">Open Test Modal</button>
          <div id="testModal" style="display: none; position: fixed; top: 50%; left: 50%; background: white; padding: 20px; border: 2px solid #333; z-index: 1000;">
            <h4>Test Modal</h4>
            <button>Button 1</button>
            <button onclick="hideModal()">Close</button>
          </div>
        </div>
      </div>
      
      <div class="feature-card">
        <h3>üì± Touch Target Validator</h3>
        <p>Validates mobile touch target sizes (minimum 44x44px).</p>
        <div class="test-area">
          <button class="small-target">Too Small</button>
          <button style="margin-left: 10px;">Good Size</button>
        </div>
      </div>
      
      <div class="feature-card">
        <h3>üìñ Reading Order Validator</h3>
        <p>Checks logical heading structure and reading flow.</p>
        <div class="test-area">
          <h1>H1 Heading</h1>
          <h3>H3 (Missing H2)</h3>
          <h2>H2 Out of Order</h2>
        </div>
      </div>
      
      <div class="feature-card">
        <h3>‚ö†Ô∏è Error Identification</h3>
        <p>Identifies and reports accessibility errors with suggestions.</p>
        <div class="test-area">
          <form class="error-demo">
            <label>Name (required but not marked):</label>
            <input type="text" required>
            <input type="submit" value="Submit">
          </form>
        </div>
      </div>
    </div>
  </div>
  <div class="card">
    <h2>üß™ Interactive Testing Area</h2>
    <p>Use this area to test various accessibility features:</p>
    
    <h3>Keyboard Navigation Test</h3>
    <p>Try pressing <kbd>Tab</kbd>, <kbd>F1</kbd> for help, and <kbd>H</kbd> to navigate headings:</p>
    <button>Button 1</button>
    <a href="#test">Link 1</a>
    <button>Button 2</button>
    <input type="text" placeholder="Text input">
    <button>Button 3</button>
    
    <h3>Color and Contrast Test</h3>
    <div style="background: #ffff00; color: #ffffff; padding: 10px;">
      Poor contrast text (fails WCAG)
    </div>
    <div style="background: #000000; color: #ffffff; padding: 10px; margin-top: 5px;">
      Good contrast text (passes WCAG)
    </div>
    
    <h3>Text and Spacing Test</h3>
    <p style="font-size: 12px; line-height: 1.0; letter-spacing: -1px;">
      This text is too small and cramped for some users to read comfortably.
    </p>
    <p style="font-size: 16px; line-height: 1.6; letter-spacing: 0.1em;">
      This text has better size and spacing for readability.
    </p>
  </div>

  <div class="card">
    <h2>üí° How to Use the Widget</h2>
    <ol>
      <li><strong>Initialize:</strong> Click the "Initialize Accessibility Widget" button above</li>
      <li><strong>Open Widget:</strong> Look for the accessibility icon (‚ôø) in the bottom-right corner</li>
      <li><strong>Navigate Features:</strong> Use the arrow buttons or keyboard to cycle through features</li>
      <li><strong>Activate Features:</strong> Click on any feature to enable/disable it</li>
      <li><strong>Test Validation:</strong> The new validation features will automatically scan the page</li>
    </ol>
    
    <h3>üéπ Keyboard Shortcuts</h3>
    <ul>
      <li><kbd>F1</kbd> - Show keyboard navigation help (when widget is active)</li>
      <li><kbd>H</kbd> - Navigate between headings</li>
      <li><kbd>L</kbd> - Navigate between landmarks</li>
      <li><kbd>Tab</kbd>/<kbd>Shift+Tab</kbd> - Navigate interactive elements</li>
      <li><kbd>Esc</kbd> - Close overlays and return focus</li>
    </ul>
  </div>
  <script>
    function initializeWidget() {
      // Initialize the accessibility widget with all features enabled
      if (typeof initializeAstral === 'function') {
        initializeAstral({
          enabledFeatures: [
            // Core features
            "Screen Reader",
            "Contrast", 
            "Highlight Links",
            "Bigger Text",
            "Text Spacing",
            "Line Height",
            // New WCAG 2.1 compliance features
            "Alt Text Validator",
            "Page Title Validator", 
            "Language Validator",
            "Auto-refresh Controls",
            "Focus Trap",
            "Touch Target Validator",
            "Reading Order Validator",
            "Error Identification"
          ]
        });
        
        // Update the button to show it's been initialized
        const button = document.querySelector('.demo-button');
        button.textContent = 'Widget Initialized! Check bottom-right corner ‚Üí';
        button.disabled = true;
        button.style.background = '#6c757d';
        
        // Add a note about the new features
        const note = document.createElement('div');
        note.style.cssText = 'background: #d4edda; border: 1px solid #c3e6cb; color: #155724; padding: 10px; margin: 10px 0; border-radius: 4px;';
        note.innerHTML = '<strong>‚úÖ Widget Initialized!</strong> The accessibility widget now includes 8 new WCAG 2.1 compliance features. Use the widget to scan this page and discover accessibility issues that can be automatically detected and improved.';
        button.parentNode.insertBefore(note, button.nextSibling);
        
      } else {
        alert('Widget failed to load. Please refresh the page and try again.');
      }
    }
    
    // Demo modal functions
    function showModal() {
      document.getElementById('testModal').style.display = 'block';
      // Focus trap will be handled by the widget's focus trap feature
      document.querySelector('#testModal button').focus();
    }
    
    function hideModal() {
      document.getElementById('testModal').style.display = 'none';
    }
    
    // Add some dynamic content for testing
    document.addEventListener('DOMContentLoaded', function() {
      // Add a timer that the auto-refresh controls can detect
      let counter = 0;
      setInterval(() => {
        counter++;
        const elem = document.querySelector('#timer-test');
        if (elem) {
          elem.textContent = `Auto-refresh timer: ${counter}`;
        }
      }, 5000);
    });
  </script>
</body>
</html>
